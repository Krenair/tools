#!/usr/bin/env python
import argparse
import os, sys, subprocess

GERRIT = "sr-gerrit:"

parser = argparse.ArgumentParser( description = "Clone an SR git repository" )
parser.add_argument( "repo",
                     help = "Repository path -- e.g. tools.git" )
parser.add_argument( "dir", nargs="?",
                     help = "Directory to clone to (optional)" )
args = parser.parse_args()

repo = args.repo
if repo[:len(GERRIT)] != GERRIT:
    repo = "{0}{1}".format( GERRIT, repo )

cmd = ["git", "clone", "--recursive", repo]
if args.dir != None:
    args += [args.dir]

subprocess.check_call( cmd )
