#!/usr/bin/env python
# -*- coding: utf-8 -*-
from __future__ import print_function

from argparse import ArgumentParser
from sr.tools import budget
import sys

parser = ArgumentParser( description = "Draw (part of) the budget as an ascii tree" )
parser.add_argument( "path", nargs = "?",
                     help = "The subtree to draw" )
args = parser.parse_args()

try:
    root = budget.find_root()
except budget.NotBudgetRepo:
    print >>sys.stderr, "Error: Please run in budget.git"
    exit(1)

b = budget.load_budget( root )

if args.path is not None:
    b = b.path( args.path )

b.draw()
